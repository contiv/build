---
# This role contains tasks for configuring and starting docker service
# XXX: setup environment for docker service like proxy etc

- name: copy systemd units for docker tcp socket settings
  template: src=docker-tcp.j2 dest=/etc/systemd/system/docker-tcp.socket

- name: remove the key file, if any. It shall be regenerated by docker on restart
  file:  name=/etc/docker/key.json  state=absent

- name: start docker with tcp socket
  shell: systemctl daemon-reload && systemctl stop docker && systemctl start docker-tcp.socket && systemctl start docker
